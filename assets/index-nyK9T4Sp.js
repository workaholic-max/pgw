import{_ as S,f as T,g as x,h as v,i as C,j as P,o as r,e as l,d,w as i,T as u,b as y,F as B,k as E,n as h,c as V,a as F,u as I,l as L,m,t as _}from"./index-b5zbRfTc.js";const b={1:[[2,3],[4,7],[5,9]],2:[[5,8]],3:[[6,9],[5,7]],4:[[5,6]],7:[[8,9]]},O={class:"wm-game"},$=["data-current-figure","disabled","onClick"],j={key:1},G={key:0},K={name:"TicTacToeView"},M=Object.assign(K,{setup(R){const e=T({selected:new Map,winning:new Set}),c=x(!0),f=v(()=>c.value?"x":"o"),o=v(()=>e.selected.size===9||e.winning.size>0),k=a=>{let s=`cell: ${a}`;return e.winning.has(a)&&(s+=" (winnable)"),e.selected.size===9&&e.selected.has(a)&&e.winning.size===0&&(s+=" (draw)"),s},N=()=>{e.selected.clear(),e.winning.clear(),c.value=!0},z=()=>{if(e.selected.size<5)return!1;const a=[];e.selected.forEach((t,n)=>{f.value===t&&a.push(n)}),a.sort((t,n)=>t-n);const s=new Set(a);for(const t of a)if(b[t]){for(const[n,p]of b[t])if(s.has(n)&&s.has(p))return e.winning=new Set([t,n,p]),!0}return!1},w=a=>{!e.selected.has(a)&&!o.value&&(e.selected.set(a,f.value),z()||(c.value=!c.value))},g=({key:a})=>{const s=Number(a);s&&s>=1&&a<=9&&w(Number(a))};return C(()=>{document.addEventListener("keyup",g),P(()=>removeEventListener("keyup",g))}),(a,s)=>(r(),l("div",O,[d(u,{appear:"",name:"fade",type:"transition"},{default:i(()=>[y("div",{class:h(["wm-board",{"wm-board--winnable":e.winning.size>0}]),style:{"transition-delay":"300ms"}},[(r(),l(B,null,E(9,t=>y("button",{key:`position: ${t}`,class:h(["wm-cell",{"wm-cell--selected":e.selected.has(t),"wm-cell--winnable":e.winning.has(t)}]),"data-current-figure":f.value,disabled:o.value,onClick:n=>w(t)},[d(u,{name:"scale",type:"transition",mode:"out-in"},{default:i(()=>[e.selected.has(t)?(r(),l("span",{key:k(t)},_(e.selected.get(t)),1)):o.value?m("",!0):(r(),l("small",j,_(t),1))]),_:2},1024),d(u,{appear:"",name:"scale",type:"transition",mode:"out-in"},{default:i(()=>[e.winning.has(t)?(r(),l("b",G,_(t),1)):m("",!0)]),_:2},1024)],10,$)),64))],2)]),_:1}),d(u,{appear:"",name:"fade",type:"transition",mode:"out-in"},{default:i(()=>[o.value?(r(),V(I(L),{key:0,size:"lg",onClick:N},{default:i(()=>s[0]||(s[0]=[F(" Restart ")])),_:1})):m("",!0)]),_:1})]))}}),A=S(M,[["__scopeId","data-v-c82c854f"]]);export{A as default};
