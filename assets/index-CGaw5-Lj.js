import{o as d,c as _,a as c,_ as G,h as S,k as H,F as g,r as C,e as o,b as l,w,A as y,f as m,t as D,g as U,n as W}from"./index-CSAr512F.js";const f=20,k=[{x:10,y:8},{x:10,y:7},{x:10,y:6}],s={UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",LEFT:"ArrowLeft"},B={[s.UP]:s.DOWN,[s.RIGHT]:s.LEFT,[s.DOWN]:s.UP,[s.LEFT]:s.RIGHT},R=s.DOWN,K={[s.UP]:{x:0,y:-1},[s.RIGHT]:{x:1,y:0},[s.DOWN]:{x:0,y:1},[s.LEFT]:{x:-1,y:0}},N=175,p=(n=!1)=>{const t=Math.floor(Math.random()*f)+1;return n&&k.some(({x:e,y:u})=>t===e||t===u)?p(n):t},j=(n,t)=>n.x<=0||n.x>f||n.y<=0||n.y>f||t.some(({x:e,y:u})=>n.x===e&&n.y===u),O=(n,t)=>Object.values(s).some(e=>e===t)&&n!==t&&n!==B[t],V=["width","height"],Z={name:"RestartIcon"},z=Object.assign(Z,{props:{width:{type:Number,default:24},height:{type:Number,default:24}},setup(n){return(t,e)=>(d(),_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:n.width,height:n.height},e[0]||(e[0]=[c("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"},null,-1)]),8,V))}}),q=["width","height"],J={name:"PlayIcon"},Q=Object.assign(J,{props:{width:{type:Number,default:24},height:{type:Number,default:24}},setup(n){return(t,e)=>(d(),_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",width:n.width,height:n.height},e[0]||(e[0]=[c("path",{"fill-rule":"evenodd",d:"M8.6 5.2A1 1 0 0 0 7 6v12a1 1 0 0 0 1.6.8l8-6a1 1 0 0 0 0-1.6l-8-6Z","clip-rule":"evenodd"},null,-1)]),8,q))}}),X={class:"wm-game"},Y={class:"wm-board"},ee={class:"wm-controls"},te={class:"wm-controls__wrapper"},se={class:"wm-controls__wrapper"},oe={class:"wm-controls__wrapper"},ie={name:"SnakeView"},ne=Object.assign(ie,{setup(n){const t=S({score:0,isStarted:!1,isOver:!1}),e=S({positions:[...k],direction:R,speed:N});let u;const E=()=>{clearInterval(u),u=setInterval(P,e.speed)},L=()=>{e.positions=[...k],e.direction=R,e.speed=N};H(()=>t.score,i=>{const r=Math.max(100,N-Math.floor(i/5)*15);e.speed!==r&&(e.speed=r,E()),i===30&&A()});const v=S({x:p(!0),y:p(!0)}),T=()=>{v.x=p(t.isOver),v.y=p(t.isOver)},P=()=>{const i={...e.positions[0]},{x:r,y:a}=K[e.direction];if(i.x+=r,i.y+=a,j(i,e.positions.slice(1))){A();return}e.positions.unshift(i),i.x===v.x&&i.y===v.y?(t.score++,T()):e.positions.pop()},b=({key:i})=>{O(e.direction,i)&&(e.direction=i)},h=i=>{t.isStarted&&O(e.direction,i)&&(e.direction=i)},$=()=>{t.isOver&&(L(),T()),t.score=0,t.isStarted=!0,t.isOver=!1,E(),window.addEventListener("keydown",b)},A=()=>{t.isStarted=!1,t.isOver=!0,clearInterval(u),window.removeEventListener("keydown",b)},F=(i,r)=>e.positions.some(a=>a.x===i&&a.y===r),M=(i,r)=>v.x===i&&v.y===r,I=i=>!t.isStarted||!O(e.direction,i);return(i,r)=>(d(),_("div",X,[c("div",Y,[(d(!0),_(g,null,C(o(f),a=>(d(),_("div",{key:`row: ${a}`,class:"wm-row"},[(d(!0),_(g,null,C(o(f),x=>(d(),_("div",{key:`cell: ${x}`,class:W(["wm-cell",{"wm-cell--snake":F(x,a),"wm-cell--food":M(x,a)}])},null,2))),128))]))),128))]),c("div",ee,[c("div",te,[l(o(m),{"is-active":e.direction===o(s).UP,disabled:I(o(s).UP),onClick:r[0]||(r[0]=a=>h(o(s).UP))},{default:w(()=>[l(o(y),{direction:"up"})]),_:1},8,["is-active","disabled"])]),c("div",se,[l(o(m),{"is-active":e.direction===o(s).LEFT,disabled:I(o(s).LEFT),onClick:r[1]||(r[1]=a=>h(o(s).LEFT))},{default:w(()=>[l(o(y),{direction:"left"})]),_:1},8,["is-active","disabled"]),l(o(m),{class:"wm-game-state-control",disabled:t.isStarted,onClick:$},{default:w(()=>[t.isStarted?(d(),_(g,{key:0},[c("span",null,D(t.score),1),r[4]||(r[4]=c("small",null,"score",-1))],64)):t.score>0?(d(),_(g,{key:1},[l(o(z),{width:20,height:20}),c("small",null,D(`score: ${t.score}`),1)],64)):(d(),U(o(Q),{key:2,width:28,height:28}))]),_:1},8,["disabled"]),l(o(m),{"is-active":e.direction===o(s).RIGHT,disabled:I(o(s).RIGHT),onClick:r[2]||(r[2]=a=>h(o(s).RIGHT))},{default:w(()=>[l(o(y),{direction:"right"})]),_:1},8,["is-active","disabled"])]),c("div",oe,[l(o(m),{"is-active":e.direction===o(s).DOWN,disabled:I(o(s).DOWN),onClick:r[3]||(r[3]=a=>h(o(s).DOWN))},{default:w(()=>[l(o(y))]),_:1},8,["is-active","disabled"])])])]))}}),ae=G(ne,[["__scopeId","data-v-3e4d031e"]]);export{ae as default};
