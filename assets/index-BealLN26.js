import{o as c,c as _,a as u,_ as G,h as S,k as H,F as I,r as A,e as o,b as d,w,A as g,f as m,t as C,g as U,n as W}from"./index-DbN713fS.js";const f=20,k=[{x:10,y:8},{x:10,y:7},{x:10,y:6}],t={UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",LEFT:"ArrowLeft"},B={[t.UP]:t.DOWN,[t.RIGHT]:t.LEFT,[t.DOWN]:t.UP,[t.LEFT]:t.RIGHT},D=t.DOWN,K={[t.UP]:{x:0,y:-1},[t.RIGHT]:{x:1,y:0},[t.DOWN]:{x:0,y:1},[t.LEFT]:{x:-1,y:0}},N=175,p=(n=!1)=>{const e=Math.floor(Math.random()*f)+1;return n&&k.some(({x:a,y:s})=>e===a||e===s)?p(n):e},j=(n,e)=>n.x<=0||n.x>f||n.y<=0||n.y>f||e.some(({x:a,y:s})=>n.x===a&&n.y===s),O=(n,e)=>Object.values(t).some(a=>a===e)&&n!==e&&n!==B[e],V=["width","height"],Z={name:"RestartIcon"},z=Object.assign(Z,{props:{width:{type:Number,default:24},height:{type:Number,default:24}},setup(n){return(e,a)=>(c(),_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:n.width,height:n.height},a[0]||(a[0]=[u("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"},null,-1)]),8,V))}}),q=["width","height"],J={name:"PlayIcon"},Q=Object.assign(J,{props:{width:{type:Number,default:24},height:{type:Number,default:24}},setup(n){return(e,a)=>(c(),_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",width:n.width,height:n.height},a[0]||(a[0]=[u("path",{"fill-rule":"evenodd",d:"M8.6 5.2A1 1 0 0 0 7 6v12a1 1 0 0 0 1.6.8l8-6a1 1 0 0 0 0-1.6l-8-6Z","clip-rule":"evenodd"},null,-1)]),8,q))}}),X={class:"wm-game"},Y={class:"wm-board"},ee={class:"wm-controls"},te={class:"wm-controls__wrapper"},se={class:"wm-controls__wrapper"},oe={class:"wm-controls__wrapper"},ie={name:"SnakeView"},ne=Object.assign(ie,{setup(n){const e=S({score:0,isStarted:!1,isOver:!1}),a=i=>!e.isStarted||!O(s.direction,i),s=S({positions:[...k],direction:D,speed:N});let y;const E=()=>{clearInterval(y),y=setInterval($,s.speed)},R=()=>{s.positions=[...k],s.direction=D,s.speed=N},L=(i,r)=>s.positions.some(l=>l.x===i&&l.y===r);H(()=>e.score,i=>{const r=Math.max(100,N-Math.floor(i/5)*15);s.speed!==r&&(s.speed=r,E())});const v=S({x:p(!0),y:p(!0)}),T=()=>{v.x=p(e.isOver),v.y=p(e.isOver)},P=(i,r)=>v.x===i&&v.y===r,$=()=>{const i={...s.positions[0]},{x:r,y:l}=K[s.direction];if(i.x+=r,i.y+=l,j(i,s.positions.slice(1))){M();return}s.positions.unshift(i),i.x===v.x&&i.y===v.y?(e.score++,T()):s.positions.pop()},b=({key:i})=>{O(s.direction,i)&&(s.direction=i)},h=i=>{e.isStarted&&O(s.direction,i)&&(s.direction=i)},F=()=>{e.isOver&&(R(),T()),e.score=0,e.isStarted=!0,e.isOver=!1,E(),window.addEventListener("keydown",b)},M=()=>{e.isStarted=!1,e.isOver=!0,clearInterval(y),window.removeEventListener("keydown",b)};return(i,r)=>(c(),_("div",X,[u("div",Y,[(c(!0),_(I,null,A(o(f),l=>(c(),_("ul",{key:`row: ${l}`,class:"wm-row"},[(c(!0),_(I,null,A(o(f),x=>(c(),_("li",{key:`cell: ${x}`,class:W(["wm-cell",{"wm-cell--snake":L(x,l),"wm-cell--food":P(x,l)}])},null,2))),128))]))),128))]),u("div",ee,[u("div",te,[d(o(m),{"is-active":s.direction===o(t).UP,disabled:a(o(t).UP),onClick:r[0]||(r[0]=l=>h(o(t).UP))},{default:w(()=>[d(o(g),{direction:"up"})]),_:1},8,["is-active","disabled"])]),u("div",se,[d(o(m),{"is-active":s.direction===o(t).LEFT,disabled:a(o(t).LEFT),onClick:r[1]||(r[1]=l=>h(o(t).LEFT))},{default:w(()=>[d(o(g),{direction:"left"})]),_:1},8,["is-active","disabled"]),d(o(m),{class:"wm-game-state-control",disabled:e.isStarted,onClick:F},{default:w(()=>[e.isStarted?(c(),_(I,{key:0},[u("span",null,C(e.score),1),r[4]||(r[4]=u("small",null,"score",-1))],64)):e.score>0?(c(),_(I,{key:1},[d(o(z),{width:20,height:20}),u("small",null,C(`score: ${e.score}`),1)],64)):(c(),U(o(Q),{key:2,width:28,height:28}))]),_:1},8,["disabled"]),d(o(m),{"is-active":s.direction===o(t).RIGHT,disabled:a(o(t).RIGHT),onClick:r[2]||(r[2]=l=>h(o(t).RIGHT))},{default:w(()=>[d(o(g),{direction:"right"})]),_:1},8,["is-active","disabled"])]),u("div",oe,[d(o(m),{"is-active":s.direction===o(t).DOWN,disabled:a(o(t).DOWN),onClick:r[3]||(r[3]=l=>h(o(t).DOWN))},{default:w(()=>[d(o(g))]),_:1},8,["is-active","disabled"])])])]))}}),ae=G(ne,[["__scopeId","data-v-5e41477b"]]);export{ae as default};
