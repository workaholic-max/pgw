import{o as c,c as _,a as l,_ as H,h as S,i as U,g as C,w,T as W,r as D,e as o,F as y,b as d,A as g,f as p,t as R,n as B}from"./index-CWJJl64H.js";const f=20,k=[{x:10,y:8},{x:10,y:7},{x:10,y:6}],s={UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",LEFT:"ArrowLeft"},K={[s.UP]:s.DOWN,[s.RIGHT]:s.LEFT,[s.DOWN]:s.UP,[s.LEFT]:s.RIGHT},L=s.DOWN,j={[s.UP]:{x:0,y:-1},[s.RIGHT]:{x:1,y:0},[s.DOWN]:{x:0,y:1},[s.LEFT]:{x:-1,y:0}},N=175,m=(n=!1)=>{const e=Math.floor(Math.random()*f)+1;return n&&k.some(({x:t,y:u})=>e===t||e===u)?m(n):e},V=(n,e)=>n.x<=0||n.x>f||n.y<=0||n.y>f||e.some(({x:t,y:u})=>n.x===t&&n.y===u),O=(n,e)=>Object.values(s).some(t=>t===e)&&n!==e&&n!==K[e],Z=["width","height"],z={name:"RestartIcon"},q=Object.assign(z,{props:{width:{type:Number,default:24},height:{type:Number,default:24}},setup(n){return(e,t)=>(c(),_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:n.width,height:n.height},t[0]||(t[0]=[l("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4"},null,-1)]),8,Z))}}),J=["width","height"],Q={name:"PlayIcon"},X=Object.assign(Q,{props:{width:{type:Number,default:24},height:{type:Number,default:24}},setup(n){return(e,t)=>(c(),_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",width:n.width,height:n.height},t[0]||(t[0]=[l("path",{"fill-rule":"evenodd",d:"M8.6 5.2A1 1 0 0 0 7 6v12a1 1 0 0 0 1.6.8l8-6a1 1 0 0 0 0-1.6l-8-6Z","clip-rule":"evenodd"},null,-1)]),8,J))}}),Y={class:"wm-game",style:{"transition-delay":"250ms"}},tt={class:"wm-board"},et={class:"wm-controls"},st={class:"wm-controls__wrapper"},ot={class:"wm-controls__wrapper"},it={class:"wm-controls__wrapper"},nt={name:"SnakeView"},rt=Object.assign(nt,{setup(n){const e=S({score:0,isStarted:!1,isOver:!1}),t=S({positions:[...k],direction:L,speed:N});let u;const E=()=>{clearInterval(u),u=setInterval($,t.speed)},P=()=>{t.positions=[...k],t.direction=L,t.speed=N};U(()=>e.score,i=>{const r=Math.max(100,N-Math.floor(i/5)*15);t.speed!==r&&(t.speed=r,E()),i===30&&A()});const v=S({x:m(!0),y:m(!0)}),T=()=>{v.x=m(e.isOver),v.y=m(e.isOver)},$=()=>{const i={...t.positions[0]},{x:r,y:a}=j[t.direction];if(i.x+=r,i.y+=a,V(i,t.positions.slice(1))){A();return}t.positions.unshift(i),i.x===v.x&&i.y===v.y?(e.score++,T()):t.positions.pop()},b=({key:i})=>{O(t.direction,i)&&(t.direction=i)},h=i=>{e.isStarted&&O(t.direction,i)&&(t.direction=i)},F=()=>{e.isOver&&(P(),T()),e.score=0,e.isStarted=!0,e.isOver=!1,E(),window.addEventListener("keydown",b)},A=()=>{e.isStarted=!1,e.isOver=!0,clearInterval(u),window.removeEventListener("keydown",b)},M=(i,r)=>t.positions.some(a=>a.x===i&&a.y===r),G=(i,r)=>v.x===i&&v.y===r,I=i=>!e.isStarted||!O(t.direction,i);return(i,r)=>(c(),C(W,{appear:"",name:"slide-down",type:"transition"},{default:w(()=>[l("div",Y,[l("div",tt,[(c(!0),_(y,null,D(o(f),a=>(c(),_("div",{key:`row: ${a}`,class:"wm-row"},[(c(!0),_(y,null,D(o(f),x=>(c(),_("div",{key:`cell: ${x}`,class:B(["wm-cell",{"wm-cell--snake":M(x,a),"wm-cell--food":G(x,a)}])},null,2))),128))]))),128))]),l("div",et,[l("div",st,[d(o(p),{"is-active":t.direction===o(s).UP,disabled:I(o(s).UP),onClick:r[0]||(r[0]=a=>h(o(s).UP))},{default:w(()=>[d(o(g),{direction:"up"})]),_:1},8,["is-active","disabled"])]),l("div",ot,[d(o(p),{"is-active":t.direction===o(s).LEFT,disabled:I(o(s).LEFT),onClick:r[1]||(r[1]=a=>h(o(s).LEFT))},{default:w(()=>[d(o(g),{direction:"left"})]),_:1},8,["is-active","disabled"]),d(o(p),{class:"wm-game-state-control",disabled:e.isStarted,onClick:F},{default:w(()=>[e.isStarted?(c(),_(y,{key:0},[l("span",null,R(e.score),1),r[4]||(r[4]=l("small",null,"score",-1))],64)):e.score>0?(c(),_(y,{key:1},[d(o(q),{width:20,height:20}),l("small",null,R(`score: ${e.score}`),1)],64)):(c(),C(o(X),{key:2,width:28,height:28}))]),_:1},8,["disabled"]),d(o(p),{"is-active":t.direction===o(s).RIGHT,disabled:I(o(s).RIGHT),onClick:r[2]||(r[2]=a=>h(o(s).RIGHT))},{default:w(()=>[d(o(g),{direction:"right"})]),_:1},8,["is-active","disabled"])]),l("div",it,[d(o(p),{"is-active":t.direction===o(s).DOWN,disabled:I(o(s).DOWN),onClick:r[3]||(r[3]=a=>h(o(s).DOWN))},{default:w(()=>[d(o(g))]),_:1},8,["is-active","disabled"])])])])]),_:1}))}}),lt=H(rt,[["__scopeId","data-v-7c981f66"]]);export{lt as default};
