import{_ as N,h as S,l as z,i as h,m as T,p as x,o,c,a as B,F as C,r as P,e as b,n as y,b as f,w as d,g as E,f as I,d as O,j as _,T as w,t as g}from"./index-CSAr512F.js";const V=9,k={1:[[2,3],[4,7],[5,9]],2:[[5,8]],3:[[6,9],[5,7]],4:[[5,6]],7:[[8,9]]},F=(m,e)=>{if(m.size<5)return[];const r=[];m.forEach((t,i)=>{e===t&&r.push(i)}),r.sort((t,i)=>t-i);const l=new Set(r);for(const t of r)if(k[t]){for(const[i,u]of k[t])if(l.has(i)&&l.has(u))return[t,i,u]}return[]},L={class:"wm-game"},$=["data-current-figure","disabled","onClick"],R={key:1},j={key:0},A={name:"TicTacToeView"},D=Object.assign(A,{setup(m){const e=S({selected:new Map,winning:new Set}),r=z(!0),l=h(()=>r.value?"x":"o"),t=h(()=>e.selected.size===9||e.winning.size>0),i=s=>{let n=`cell: ${s}`;return e.winning.has(s)&&(n+=" (winnable)"),e.selected.size===9&&e.selected.has(s)&&e.winning.size===0&&(n+=" (draw)"),n},u=()=>{e.selected.clear(),e.winning.clear(),r.value=!0},v=s=>{if(e.selected.has(s)||t.value)return;e.selected.set(s,l.value);const n=F(e.selected,l.value);n.length>0?e.winning=new Set(n):r.value=!r.value},p=({key:s})=>{const n=Number(s);n&&n>=1&&s<=9&&v(Number(s))};return T(()=>document.addEventListener("keyup",p)),x(()=>document.removeEventListener("keyup",p)),(s,n)=>(o(),c("div",L,[B("div",{class:y(["wm-board",{"wm-board--winnable":e.winning.size>0}])},[(o(!0),c(C,null,P(b(V),a=>(o(),c("button",{key:`position: ${a}`,class:y(["wm-cell",{"wm-cell--selected":e.selected.has(a),"wm-cell--winnable":e.winning.has(a)}]),"data-current-figure":l.value,disabled:t.value,onClick:G=>v(a)},[f(w,{name:"scale",type:"transition",mode:"out-in"},{default:d(()=>[e.selected.has(a)?(o(),c("span",{key:i(a)},g(e.selected.get(a)),1)):t.value?_("",!0):(o(),c("small",R,g(a),1))]),_:2},1024),f(w,{appear:"",name:"scale",type:"transition",mode:"out-in"},{default:d(()=>[e.winning.has(a)?(o(),c("b",j,g(a),1)):_("",!0)]),_:2},1024)],10,$))),128))],2),f(w,{appear:"",name:"slide-up",type:"transition",mode:"out-in"},{default:d(()=>[t.value?(o(),E(b(I),{key:0,size:"lg",onClick:u},{default:d(()=>n[0]||(n[0]=[O(" Restart ")])),_:1})):_("",!0)]),_:1})]))}}),M=N(D,[["__scopeId","data-v-61d8b71e"]]);export{M as default};
