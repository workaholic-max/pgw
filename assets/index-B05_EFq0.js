import{_ as N,h as S,j as z,k as y,l as T,m as x,o,c,b as m,w as d,T as f,a as B,F as C,r as P,e as h,n as b,g as E,d as I,f as O,p as w,t as g}from"./index-Dfp_mOT2.js";const V=9,k={1:[[2,3],[4,7],[5,9]],2:[[5,8]],3:[[6,9],[5,7]],4:[[5,6]],7:[[8,9]]},F=(_,e)=>{if(_.size<5)return[];const r=[];_.forEach((t,i)=>{e===t&&r.push(i)}),r.sort((t,i)=>t-i);const l=new Set(r);for(const t of r)if(k[t]){for(const[i,u]of k[t])if(l.has(i)&&l.has(u))return[t,i,u]}return[]},L={class:"wm-game"},$=["data-current-figure","disabled","onClick"],R={key:1},j={key:0},A={name:"TicTacToeView"},D=Object.assign(A,{setup(_){const e=S({selected:new Map,winning:new Set}),r=z(!0),l=y(()=>r.value?"x":"o"),t=y(()=>e.selected.size===9||e.winning.size>0),i=s=>{let n=`cell: ${s}`;return e.winning.has(s)&&(n+=" (winnable)"),e.selected.size===9&&e.selected.has(s)&&e.winning.size===0&&(n+=" (draw)"),n},u=()=>{e.selected.clear(),e.winning.clear(),r.value=!0},p=s=>{if(e.selected.has(s)||t.value)return;e.selected.set(s,l.value);const n=F(e.selected,l.value);n.length>0?e.winning=new Set(n):r.value=!r.value},v=({key:s})=>{const n=Number(s);n&&n>=1&&s<=9&&p(Number(s))};return T(()=>document.addEventListener("keyup",v)),x(()=>document.removeEventListener("keyup",v)),(s,n)=>(o(),c("div",L,[m(f,{appear:"",name:"slide-down",type:"transition"},{default:d(()=>[B("div",{class:b(["wm-board",{"wm-board--winnable":e.winning.size>0}]),style:{"transition-delay":"250ms"}},[(o(!0),c(C,null,P(h(V),a=>(o(),c("button",{key:`position: ${a}`,class:b(["wm-cell",{"wm-cell--selected":e.selected.has(a),"wm-cell--winnable":e.winning.has(a)}]),"data-current-figure":l.value,disabled:t.value,onClick:G=>p(a)},[m(f,{name:"scale",type:"transition",mode:"out-in"},{default:d(()=>[e.selected.has(a)?(o(),c("span",{key:i(a)},g(e.selected.get(a)),1)):t.value?w("",!0):(o(),c("small",R,g(a),1))]),_:2},1024),m(f,{appear:"",name:"scale",type:"transition",mode:"out-in"},{default:d(()=>[e.winning.has(a)?(o(),c("b",j,g(a),1)):w("",!0)]),_:2},1024)],10,$))),128))],2)]),_:1}),m(f,{appear:"",name:"slide-down",type:"transition",mode:"out-in"},{default:d(()=>[t.value?(o(),E(h(O),{key:0,size:"lg",onClick:u},{default:d(()=>n[0]||(n[0]=[I(" Restart ")])),_:1})):w("",!0)]),_:1})]))}}),M=N(D,[["__scopeId","data-v-97357e39"]]);export{M as default};
