import{_ as N,h as S,l as z,i as h,m as T,p as x,o,c,a as B,F as C,r as P,e as y,n as b,b as f,w as d,g as E,f as I,d as O,j as _,T as w,t as g}from"./index-Dmafc7Tg.js";const V=9,k={1:[[2,3],[4,7],[5,9]],2:[[5,8]],3:[[6,9],[5,7]],4:[[5,6]],7:[[8,9]]},F=(m,e)=>{if(m.size<5)return[];const i=[];m.forEach((n,s)=>{e===n&&i.push(s)}),i.sort((n,s)=>n-s);const l=new Set(i);for(const n of i)if(k[n]){for(const[s,u]of k[n])if(l.has(s)&&l.has(u))return[n,s,u]}return[]},L={class:"wm-game"},$=["data-current-figure","disabled","onClick"],R={key:1},j={key:0},A={name:"TicTacToeView"},D=Object.assign(A,{setup(m){const e=S({selected:new Map,winning:new Set}),i=z(!0),l=a=>{let t=`cell: ${a}`;return e.winning.has(a)&&(t+=" (winnable)"),e.selected.size===9&&e.selected.has(a)&&e.winning.size===0&&(t+=" (draw)"),t},n=h(()=>i.value?"x":"o"),s=h(()=>e.selected.size===9||e.winning.size>0),u=()=>{e.selected.clear(),e.winning.clear(),i.value=!0},p=a=>{if(e.selected.has(a)||s.value)return;e.selected.set(a,n.value);const t=F(e.selected,n.value);t.length>0?e.winning=new Set(t):i.value=!i.value},v=({key:a})=>{const t=Number(a);t&&t>=1&&a<=9&&p(Number(a))};return T(()=>document.addEventListener("keyup",v)),x(()=>document.removeEventListener("keyup",v)),(a,t)=>(o(),c("div",L,[B("div",{class:b(["wm-board",{"wm-board--winnable":e.winning.size>0}])},[(o(!0),c(C,null,P(y(V),r=>(o(),c("button",{key:`position: ${r}`,type:"button",class:b(["wm-cell",{"wm-cell--selected":e.selected.has(r),"wm-cell--winnable":e.winning.has(r)}]),"data-current-figure":n.value,disabled:s.value,onClick:G=>p(r)},[f(w,{name:"scale",type:"transition",mode:"out-in"},{default:d(()=>[e.selected.has(r)?(o(),c("span",{key:l(r)},g(e.selected.get(r)),1)):s.value?_("",!0):(o(),c("small",R,g(r),1))]),_:2},1024),f(w,{appear:"",name:"scale",type:"transition",mode:"out-in"},{default:d(()=>[e.winning.has(r)?(o(),c("b",j,g(r),1)):_("",!0)]),_:2},1024)],10,$))),128))],2),f(w,{appear:"",name:"slide-up",type:"transition",mode:"out-in"},{default:d(()=>[s.value?(o(),E(y(I),{key:0,size:"lg",onClick:u},{default:d(()=>t[0]||(t[0]=[O(" Restart ")])),_:1})):_("",!0)]),_:1})]))}}),M=N(D,[["__scopeId","data-v-e15e40cf"]]);export{M as default};
